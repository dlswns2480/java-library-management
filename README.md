# java-library-management
1~2주차 과제인 도서 관리 애플리케이션입니다.\
객체지향적인 구현을 너무 고민하기보다, 우선 기능 구현을 해보고 객체지향적인 코드로 바꿔보세요.

**개략적인 요구사항**

-   도서 관리 애플리케이션을 만들어야합니다.
-   도서 관리 애플리케이션은 도서에 대해 다음과 같은 행동이 가능해야합니다.
    -   도서를 등록할 수 있어야합니다.
    -   도서 전체 목록을 볼 수 있어야합니다.
    -   도서 제목을 기준으로 도서를 검색할 수 있어야합니다.
    -   도서번호를 기준으로 아래 액션이 가능해야합니다.
        -   도서를 대여할 수 있어야합니다.
        -   도서를 반납할 수 있어야합니다.
        -   도서를 분실 처리할 수 있어야합니다.
        -   도서를 삭제할 수 있어야합니다.
-   도서는 다음과 같은 데이터를 가져야합니다. 또한 요구사항을 만족하기 위해 추가적인 필드가 필요하다면 여러분이 추가하셔도 됩니다.
    -   도서번호(중복되지 않아야합니다. ISBN을 사용하라는 의미가 아닙니다.)
    -   제목
    -   작가 이름
    -   페이지 수
    -   상태
        -   대여 가능
        -   대여중
        -   도서 정리중
        -   분실됨

**도서 상태 관련 요구사항**

-   도서가  '대여 가능' 상태 일 때만 도서를 대여할 수 있고, 도서가 대여되면 상태를 '대여중'으로 바꿔야합니다. 도서가 '대여 가능' 상태가 아닌 경우 해당 도서를 대여할 수 없는 이유에 대해 알려줘야합니다.
-   도서가 '대여중' 상태 일 때는 도서를 반납할 수 있습니다. 이때 도서가 반납되면 도서의 상태는 '도서 정리중' 상태로 바뀌어야합니다. 그리고 '도서 정리중' 상태에서 5분이 지난 도서는 '대여 가능'으로 바뀌어야합니다. (대여된 후 5분이 지난 도서를 누군가 대여하려고 했을 때 대여 처리가 되어야한다는 겁니다)
-   도서를 분실 처리하면 도서는 '분실됨' 상태가 되어야합니다. 만약 분실된 도서를 찾게된 경우 반납 처리를 하면 도서를 찾은 것으로 간주합니다. 이 경우 도서를 반납하는 것과 동일한 절차가 진행되어야합니다.

**제약사항**

-   입력은 기본적으로 Console로 받습니다. 그러나 도서 정보 등록의 경우 애플리케이션이 시작할 때 여러분들이 지정한 File에서 읽어서 자동으로 등록되도록 만들어야합니다. 또한 Console로 등록한 도서는 File에도 저장되어 애플리케이션이 재시작 되더라도 등록된 도서가 자동으로 등록되어야합니다.
-   애플리케이션은 '테스트 모드'를 지원해야합니다. 테스트 모드에서는 파일에서 데이터를 읽거나 쓰지 않고 오직 콘솔 입력을 통해서만 데이터를 입력 받고, 저장도 List에만 저장합니다. 당연히 애플리케이션을 재시작하면 모든 데이터는 날아갑니다. 테스트 모드로 실행할지 일반 모드로 실행할지는 애플리케이션을 시작할 때 입력에 따라 결정됩니다.
-   도서 정보를 저장하는 파일은 CSV, JSON 등 데이터를 저장하고 조회하기 적절한 형태라면 뭐라도 좋습니다.

**테스트 코드 관련**\
요구사항을 잘 만족하고 있는지 보여줄 수 있는 테스트 코드를 작성해야합니다.\
위와 같은 요구사항을 보지 못한 사람이 테스트 코드만 보더라도 해당 애플리케이션이 가지고 있는 요구사항을 파악할 수 있도록 작성하는게 좋습니다.\
여기에 부합한다고 생각되는 테스트 코드들을 마음껏 작성해보세요.

**모드 선택 예시**
```
Q. 모드를 선택해주세요.
1. 일반 모드
2. 테스트 모드

> 1

[System] 일반 모드로 애플리케이션을 실행합니다.
```

**모드 진입 후 선택 화면 예시**
```
Q. 사용할 기능을 선택해주세요.
1. 도서 등록
2. 전체 도서 목록 조회
3. 제목으로 도서 검색
4. 도서 대여
5. 도서 반납
6. 도서 분실
7. 도서 삭제

>
```

**도서 등록 예시**
```
(메뉴에서 1번 선택시)

> 1

[System] 도서 등록 메뉴로 넘어갑니다.

Q. 등록할 도서 제목을 입력하세요.

> 스킨 인 더 게임

Q. 작가 이름을 입력하세요.

> 나심 탈레브

Q. 페이지 수를 입력하세요.

> 444

[System] 도서 등록이 완료되었습니다.

(메뉴 다시 노출)
```

**전체 도서 목록 조회**
```
(메뉴에서 2번 선택시)

> 2

[System] 전체 도서 목록입니다.

도서번호 : 1
제목 : 위기의 역사
작가 이름 : 오건영
페이지 수 : 480 페이지
상태 : 대여중

------------------------------

도서번호 : 2
제목 : 스킨 인 더 게임
작가 이름 : 나심 탈레브
페이지 수 : 444 페이지
상태 : 대여 가능

------------------------------

도서번호 : 3
제목 : 이것이 취업을 위한 OOO다
작가 이름 : 이준형
페이지 수 : 821 페이지
상태 : 대여 가능

------------------------------

[System] 도서 목록 끝

(메뉴 다시 노출)
```

**도서 제목으로 검색 예시**
```
(메뉴에서 3번 선택시)

> 3

[System] 제목으로 도서 검색 메뉴로 넘어갑니다.

Q. 검색할 도서 제목 일부를 입력하세요.

> 게임

도서번호 : 2
제목 : 스킨 인 더 게임
작가 이름 : 나심 탈레브
페이지 수 : 444 페이지
상태 : 대여 가능

------------------------------

[System] 검색된 도서 끝

(메뉴 다시 노출)
```
**도서 대여 예시 (대여 성공)**
```
(메뉴에서 4번 선택시)

> 4

[System] 도서 대여 메뉴로 넘어갑니다.

Q. 대여할 도서번호를 입력하세요

> 3

[System] 도서가 대여 처리 되었습니다.

(메뉴 다시 노출)
```
**도서 대여 예시 (대여 실패)**
```
(메뉴에서 4번 선택시)

> 4

[System] 도서 대여 메뉴로 넘어갑니다.

Q. 대여할 도서번호를 입력하세요

> 1

[System] 이미 대여중인 도서입니다.

(메뉴 다시 노출)
```
*) 정리중이거나 분실된 도서도 대여 불가능하다는 메시지가 나와야합니다.

**도서 반납 예시 (반납 성공)**
```
(메뉴에서 5번 선택시)

> 5

[System] 도서 반납 메뉴로 넘어갑니다.

Q. 반납할 도서번호를 입력하세요

> 1

[System] 도서가 반납 처리 되었습니다.

(메뉴 다시 노출)
```
**도서 반납 예시 (반납 실패)**
```
(메뉴에서 4번 선택시)

> 4

[System] 도서 대여 메뉴로 넘어갑니다.

Q. 대여할 도서번호를 입력하세요

> 2

[System] 원래 대여가 가능한 도서입니다.

(메뉴 다시 노출)
```
**도서 분실 처리 예시 (분실 처리 성공)**
```
(메뉴에서 6번 선택시)

> 6

[System] 도서 분실 처리 메뉴로 넘어갑니다.

Q. 분실 처리할 도서번호를 입력하세요

> 1

[System] 도서가 분실 처리 되었습니다.

(메뉴 다시 노출)
```
**도서 분실 처리 예시 (분실 처리 실패)**
```
(메뉴에서 6번 선택시)

> 6

[System] 도서 분실 처리 메뉴로 넘어갑니다.

Q. 분실 처리할 도서번호를 입력하세요

> 1

[System] 이미 분실 처리된 도서입니다.

(메뉴 다시 노출)
```
**도서 삭제 예시 (삭제 처리 성공)**
```
(메뉴에서 7번 선택시)

> 7

[System] 도서 삭제 처리 메뉴로 넘어갑니다.

Q. 삭제 처리할 도서번호를 입력하세요

> 1

[System] 도서가 삭제 처리 되었습니다.

(메뉴 다시 노출)
```
**도서 삭제 예시 (삭제 처리 실패)**
```
(메뉴에서 7번 선택시)

> 7

[System] 도서 삭제 처리 메뉴로 넘어갑니다.

Q. 삭제 처리할 도서번호를 입력하세요

> 1

[System] 존재하지 않는 도서번호 입니다.

(메뉴 다시 노출)
```






<!--
  템플릿은 아직 PR 작성이 익숙하지 않으신 분들을 위해서 제공하는 가이드입니다!
  리뷰어 또는 이 PR을 보게 될 다른 사람들이 이 PR을 보는데 참고할 수 있는 내용이 있다면 포함해서 작성해주시면 됩니다.
-->

## 📌 과제 설명 <!-- 어떤 걸 만들었는지 대략적으로 설명해주세요 -->
-  도서의 상태와 사용자가 원하는 기능에 맞춰 도서를 관리하는 도서 관리 어플리케이션입니다.
- 콘솔을 통해 입출력을 할 수 있고, 일반모드의 경우에는 json형태로 도서 파일을 저장합니다. 
- 테스트 모드에서는 기능 사용 후, 실행 종료 시 정보가 모두 사라집니다.

## 👩‍💻 요구 사항과 구현 내용 <!-- 기능을 Commit 별로 잘개 쪼개고, Commit 별로 설명해주세요 -->
##### App
- 메인함수 역할을 합니다. 1번과 2번 모드 중 선택을 받고 각 모드에 따라 알맞는 리포지토리를 주입해줍니다.
<br>

##### Controller
- 사용할 기능을 입력 받고 서비스 함수를 호출합니다.
- App에서 주입받은 리포지토리를 서비스에게 주입해줍니다.
##### Status
- 도서의 상태를 나타내는 enum 파일이 있습니다.
- enum의 각 람다식 호출 시 도서 반납시에 알맞는 리턴값을 받을 수 있습니다.
##### Service
- 각 기능에 맞는 리포지토리 메서드를 호출합니다.
- 서비스에서는 각 기능 내에서 도서번호, 책 제목등을 입력받고 입력값을 통해 리포지토리 메서드를 호출합니다.
##### Dto
- 도서의 번호, 제목, 저자, 페이지 수, 상태를 담는 BookInfo가 있습니다.
- Json과 Java 객체의 직렬화, 역직렬화를 위한 BookInfo의 Json버전입니다. (여기선 상태가 enum이 아닌 String입니다)
##### Repository
- Repository : 각 구현체의 메소드를 정의한 인터페이스입니다.
- GeneralModeRepository : 1번 모드를 위한 로컬 경로의 파일 저장, 조회를 위한 리포지토리입니다.
    도서번호는 경로에 도서번호를 카운트하는 json파일을 하나 두어 그 파일을 읽으며 도서 등록시에는 그 파일의 카운트를 증가시켜주었습니다.
- TestModeRepository : 2번 모드를 위한 리포지토리 입니다. 도서 정보는 리스트 하나를 만들어 그곳에 담아 관리했습니다.
- FileControl : Json파일을 저장하고 수정하고 조회하는 코드가 너무 길어 따로 클래스를 두어 필요한 메소드들을 정의했습니다.
<!--## ✅ 피드백 반영사항   지난 코드리뷰에서 고친 사항을 적어주세요. 재PR 시에만 사용해 주세요! (재PR 아닌 경우 삭제) -->


## ✅ PR 포인트 & 궁금한 점 <!-- 리뷰어 분들이 집중적으로 보셨으면 하는 내용을 적어주세요 -->
1. 객체지향을 계속 생각하다 보니 조금 꼬인것이 있는 것 같습니다. 
 &rarr; 리포지토리에서 로직을 더 줄이고 서비스로 옮겨야 할 지 궁금합니다.
2. 콘솔 입력을 세개의 클래스에서 받고 있는데 입력 받는 클래스의 개수를 줄여야 할 지 궁금합니다.
3. 파일을 Json 형식으로 관리하려다 보니 코드의 가독성도 떨어지고 try catch 문이 많이 들어가게 되었는데 이럴 땐 csv 형식으로 관리하는 것이 더 나은 지 궁금합니다.
4. 이번 과제에서 enum에서 람다를 활용하면 리포지토리의 코드가 간결해질 것 같아서 활용하였는데 도서 대여시에만 유용한 것 같습니다. 이럴 경우엔 그냥 빼는 것이 나은지 궁금합니다.
5. RuntimeException을 던지는 부분이 많은데 어떤 예외 일 지 더 좁혀서 명시해주는 것이 나을 지 궁금합니다!